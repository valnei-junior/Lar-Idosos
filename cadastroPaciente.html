<!DOCTYPE html>
<html lang="pt-BR">
<!-- Define o tipo de documento como HTML e a linguagem da página como português do Brasil -->
<head>
    <meta charset="UTF-8">
    <!-- Define o charset como UTF-8 para suportar caracteres especiais -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Define o viewport para que o layout seja responsivo em diferentes dispositivos -->
    <title>Cadastro de Paciente - Lar de Idosos Filhos de Abraão</title>
    <!-- Define o título da página que aparecerá na aba do navegador -->
    <link rel="stylesheet" href="styles.css">
    <!-- Importa o arquivo CSS externo para estilizar a página -->
</head>
<body>

    <header>
        <!-- Cabeçalho da página com logo e título -->
        <div class="header-content">
            <img src="Imagens/LOGO.png" alt="Logo" width="100" height="100">
            <!-- Exibe a logo com largura e altura definidas -->
            <h1>LAR DE IDOSOS FILHOS DE ABRAÃO</h1>
            <!-- Título principal da página -->
        </div>
        <nav>
            <!-- Barra de navegação com links para outras páginas -->
            <ul>
                <li><a href="index.html">Início</a></li>
                <!-- Link para a página inicial -->
                <li><a href="cadastroVoluntario.html">Cadastro de Voluntário</a></li>
                <!-- Link para a página de cadastro de voluntário -->
                <li><a href="cadastroPaciente.html">Cadastro de Paciente</a></li>
                <!-- Link para a página de cadastro de paciente -->
                <li><a href="cadastroMateriais.html">Cadastro de Materiais</a></li>
                <!-- Link para a página de cadastro de materiais -->
            </ul>
        </nav>
    </header>

    <section class="form-section">
        <!-- Seção de formulário para o cadastro de paciente -->
        <h2>Cadastro de Paciente</h2>
        <!-- Título da seção de cadastro -->
        <form id="cadastroForm">
            <!-- Formulário para coleta de dados -->
            <label for="foto_idoso">Foto do Idoso:</label>
            <!-- Rótulo para o campo de foto do idoso -->
            <input type="file" id="foto_idoso" accept="image/*" onchange="previewImage(event)">
            <!-- Input para selecionar arquivo de imagem -->
            <img id="preview" style="display:none; margin-top: 10px;" width="150" height="150" alt="Pré-visualização da foto">
            <!-- Imagem de pré-visualização que será exibida após o upload da foto -->

            <h3>Informações Pessoais do Idoso</h3>
            <!-- Subtítulo para a seção de informações pessoais -->
            <input type="text" id="nome_idoso" placeholder="Nome Completo" required>
            <!-- Campo de texto para o nome completo do idoso -->
            <input type="date" id="data_nascimento" required>
            <!-- Campo para selecionar a data de nascimento -->
            <input type="number" id="idade" placeholder="Idade" required>
            <!-- Campo para a idade -->
            <select id="sexo" required>
                <!-- Menu suspenso para selecionar o sexo -->
                <option value="Masculino">Masculino</option>
                <option value="Feminino">Feminino</option>
            </select>
            <input type="text" id="estado_civil" placeholder="Estado Civil">
            <!-- Campo de texto para o estado civil -->
            <input type="text" id="nacionalidade" placeholder="Nacionalidade">
            <!-- Campo de texto para a nacionalidade -->
            <input type="text" id="naturalidade" placeholder="Naturalidade">
            <!-- Campo de texto para a naturalidade -->
            <input type="text" id="rg" placeholder="RG">
            <!-- Campo de texto para o RG -->
            <input type="text" id="cpf" placeholder="CPF">
            <!-- Campo de texto para o CPF -->
            <input type="text" id="endereco" placeholder="Endereço Completo">
            <!-- Campo de texto para o endereço completo -->
            <input type="text" id="bairro" placeholder="Bairro">
            <!-- Campo de texto para o bairro -->
            <input type="text" id="cidade" placeholder="Cidade">
            <!-- Campo de texto para a cidade -->
            <input type="text" id="estado" placeholder="Estado">
            <!-- Campo de texto para o estado -->
            <input type="text" id="cep" placeholder="CEP">
            <!-- Campo de texto para o CEP -->
            <input type="tel" id="telefone" placeholder="Telefone">
            <!-- Campo de telefone -->
            <input type="tel" id="celular" placeholder="Celular">
            <!-- Campo para celular -->
            <input type="email" id="email" placeholder="E-mail">
            <!-- Campo para o e-mail -->

            <h3>Contato de Emergência</h3>
            <!-- Subtítulo para a seção de contato de emergência -->
            <input type="text" id="contato_nome" placeholder="Nome">
            <!-- Campo de texto para o nome do contato de emergência -->
            <input type="text" id="relacao" placeholder="Relação">
            <!-- Campo de texto para a relação com o contato de emergência -->
            <input type="text" id="contato_endereco" placeholder="Endereço do Contato">
            <!-- Campo de texto para o endereço do contato de emergência -->
            <input type="tel" id="contato_telefone" placeholder="Telefone">
            <!-- Campo de telefone para o contato de emergência -->
            <input type="tel" id="contato_celular" placeholder="Celular">
            <!-- Campo para celular do contato de emergência -->
            <input type="email" id="contato_email" placeholder="E-mail do Contato">
            <!-- Campo de texto para o e-mail do contato de emergência -->

            <h3>Informações de Saúde</h3>
            <!-- Subtítulo para a seção de informações de saúde -->
            <textarea id="condicoes_medicas" placeholder="Condições Médicas"></textarea>
            <!-- Campo de texto para as condições médicas -->
            <input type="text" id="alergias" placeholder="Alergias">
            <!-- Campo de texto para as alergias -->
            <textarea id="medicamentos" placeholder="Medicamentos de Uso Contínuo"></textarea>
            <!-- Campo de texto para medicamentos de uso contínuo -->
            <textarea id="historia_medica" placeholder="Histórico Médico"></textarea>
            <!-- Campo de texto para o histórico médico -->
            <input type="text" id="tipo_sanguineo" placeholder="Tipo Sanguíneo">
            <!-- Campo de texto para o tipo sanguíneo -->
            <input type="text" id="plano_saude" placeholder="Plano de Saúde">
            <!-- Campo de texto para o plano de saúde -->
            <input type="text" id="numero_plano_saude" placeholder="Número do Plano de Saúde">
            <!-- Campo de texto para o número do plano de saúde -->

            <h3>Informações dos Familiares</h3>
            <!-- Subtítulo para a seção de informações dos familiares -->
            <input type="text" id="nome_familiar" placeholder="Nome do Familiar" required>
            <!-- Campo de texto para o nome do familiar -->
            <input type="text" id="relacao_familiar" placeholder="Relação" required>
            <!-- Campo de texto para a relação com o familiar -->
            <input type="text" id="endereco_familiar" placeholder="Endereço">
            <!-- Campo de texto para o endereço do familiar -->
            <input type="tel" id="telefone_familiar" placeholder="Telefone" required>
            <!-- Campo de telefone para o familiar -->
            <input type="tel" id="celular_familiar" placeholder="Celular do Familiar">
            <!-- Campo de telefone celular do familiar -->
            <input type="email" id="email_familiar" placeholder="E-mail">
            <!-- Campo de texto para o e-mail do familiar -->
            <textarea id="observacoes_familiares" placeholder="Observações sobre o Familiar"></textarea>
            <!-- Campo de texto para observações sobre o familiar -->
            
            <button type="button" onclick="salvarPDF()">Salvar em PDF</button>
            <!-- Botão para salvar o formulário em PDF, acionando a função 'salvarPDF' -->
        </form>
    </section>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <!-- Importa a biblioteca jsPDF para gerar PDFs -->
    <script>
        let fotoBase64;
        // Declara uma variável para armazenar a foto em formato base64

        function previewImage(event) {
            // Função para pré-visualizar a imagem do idoso
            const reader = new FileReader();
            // Cria um objeto FileReader para ler o arquivo
            reader.onload = function() {
                // Quando o arquivo for lido, exibe a imagem
                document.getElementById('preview').src = reader.result;
                // Define a fonte da imagem como o resultado do arquivo lido
                document.getElementById('preview').style.display = 'block';
                // Exibe a imagem de pré-visualização
                fotoBase64 = reader.result;
                // Armazena o resultado da imagem em base64 na variável
            }
            reader.readAsDataURL(event.target.files[0]);
            // Lê o arquivo de imagem selecionado
        }

        function salvarPDF() {
            // Função para salvar o formulário em PDF
            const { jsPDF } = window.jspdf;
            // Cria uma instância do jsPDF
            const doc = new jsPDF();
            // Inicializa um novo documento PDF
            const fields = ['nome_idoso', 'data_nascimento', 'idade', 'sexo', 'estado_civil', 'nacionalidade', 'naturalidade', 'rg', 'cpf', 'endereco', 'bairro', 'cidade', 'estado', 'cep', 'telefone', 'celular', 'email', 'contato_nome', 'relacao', 'contato_endereco', 'contato_telefone', 'contato_celular', 'contato_email', 'condicoes_medicas', 'alergias', 'medicamentos', 'historia_medica', 'tipo_sanguineo', 'plano_saude', 'numero_plano_saude', 'nome_familiar', 'relacao_familiar', 'endereco_familiar', 'telefone_familiar', 'celular_familiar', 'email_familiar', 'observacoes_familiares'];
            // Array com os IDs dos campos do formulário para serem incluídos no PDF
            let yPosition = 20;
            // Define a posição vertical inicial no PDF

            // Adiciona foto e texto ao PDF
            if (fotoBase64) doc.addImage(fotoBase64, 'JPEG', 160, 10, 40, 40);
            // Se houver imagem, adiciona a foto ao PDF

            fields.forEach(field => {
                // Itera sobre os campos do formulário
                const value = document.getElementById(field).value;
                // Pega o valor do campo com base no ID
                if (value) {
                    doc.text(`${field.replace('_', ' ')}: ${value}`, 10, yPosition);
                    // Adiciona o texto do campo ao PDF na posição definida
                    yPosition += 10;
                    // Atualiza a posição vertical para o próximo campo
                }
            });

            doc.save(document.getElementById('nome_idoso').value + '.pdf');
            // Salva o PDF com o nome do idoso
        }
    </script>

</body>
</html>
